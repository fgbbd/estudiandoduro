---
import BaseLayout from "../layouts/BaseLayout.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import GameList from "../components/GameList.astro";

import "../styles/index.css"
import '../styles/global.css'

import games from '../data/games.json'

const gameNames = games.map((g) => g.name).join(', ');
---
<BaseLayout>
  <fragment slot="head">
    <meta name="description" content={`Juega gratis a juegos sin anuncios en estudiandoduro. Juega a ${gameNames}`} />
    <meta name="keywords" content="estudiando-duro, estudiando duro, juegos, games, unblocked, gratis"/>
  </fragment>
  <Header />
  <GameList />
  <Footer />
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const input = document.getElementById("buscador");
      const noMatch = document.getElementById("no-match");
      const footer = document.getElementById("footer");
      const games = document.querySelectorAll("#games-list > a");

      input.addEventListener("input", () => {
        const query = input.value.toLowerCase().trim();
        let found = false;

        games.forEach(game => {
          const name = game.dataset.name?.toLowerCase() || "";
          const match = name.includes(query);
          game.style.display = match ? "block" : "none";
          if (match) found = true;
        });

        noMatch.style.display = found ? "none" : "block";
        footer.style.display = found ? "flex" : "none";
      });
    });
  </script>
</BaseLayout>