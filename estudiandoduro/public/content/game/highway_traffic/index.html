<!DOCTYPE html>

<html lang="en-us">
<head><meta http-equiv="Content-Security-Policy" content="child-src 'self' *.allwebgames.com *.gametok.com *.juegocasa.com *.playhop.com *.wowspiele.de *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz *.yango.com allwebgames.com blob: gametok.com juegocasa.com playhop.com wowspiele.de yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yango.com; connect-src 'self' *.allwebgames.com *.eponesh.com *.gameanalytics.com *.gametok.com *.juegocasa.com *.playhop.com *.unity3d.com *.website.yandexcloud.net *.wowspiele.de *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.net *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz *.yango.com allwebgames.com blob: data: gametok.com juegocasa.com playhop.com storage.yandexcloud.net wowspiele.de wss://*.eponesh.com:* www.google-analytics.com www.googletagmanager.com yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yandexmetrica.com yango.com yastatic.net; default-src 'self'; font-src 'self' *.allwebgames.com *.gametok.com *.juegocasa.com *.playhop.com *.website.yandexcloud.net *.wowspiele.de *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz *.yango.com allwebgames.com data: fonts.gstatic.com gametok.com juegocasa.com playhop.com storage.yandexcloud.net wowspiele.de yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yango.com yastat.net yastatic.net; frame-src 'self' *.allwebgames.com *.gametok.com *.juegocasa.com *.playhop.com *.website.yandexcloud.net *.wowspiele.de *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz *.yango.com allwebgames.com gametok.com juegocasa.com localhost playhop.com wowspiele.de yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yango.com yastatic.net; img-src 'self' *.allwebgames.com *.eponesh.com *.gametok.com *.juegocasa.com *.playhop.com *.website.yandexcloud.net *.wowspiele.de *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.net *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz *.yango.com allwebgames.com blob: data: gametok.com juegocasa.com playhop.com storage.yandexcloud.net wowspiele.de yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yango.com yastatic.net; media-src 'self' *.allwebgames.com *.gametok.com *.juegocasa.com *.playhop.com *.website.yandexcloud.net *.wowspiele.de *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.net *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz *.yango.com allwebgames.com blob: data: gametok.com juegocasa.com playhop.com storage.yandexcloud.net wowspiele.de yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yango.com; object-src 'self' *.allwebgames.com *.gametok.com *.juegocasa.com *.playhop.com *.wowspiele.de *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz *.yango.com allwebgames.com blob: gametok.com juegocasa.com playhop.com wowspiele.de yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yango.com; script-src 'self' 'unsafe-eval' 'unsafe-inline' *.allwebgames.com *.eponesh.com *.gameanalytics.com *.gametok.com *.juegocasa.com *.playhop.com *.website.yandexcloud.net *.wowspiele.de *.ya.ru *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz *.yango.com abt.s3.yandex.net allwebgames.com blob: data: gametok.com juegocasa.com playhop.com storage.yandexcloud.net wowspiele.de www.google-analytics.com www.googletagmanager.com ya.ru yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yango.com yastatic.net; style-src 'self' 'unsafe-eval' 'unsafe-inline' *.allwebgames.com *.gametok.com *.juegocasa.com *.playhop.com *.website.yandexcloud.net *.wowspiele.de *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz *.yango.com allwebgames.com blob: data: fonts.googleapis.com gametok.com juegocasa.com playhop.com storage.yandexcloud.net wowspiele.de yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yango.com; worker-src 'self' *.allwebgames.com *.gametok.com *.juegocasa.com *.playhop.com *.website.yandexcloud.net *.wowspiele.de *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz *.yango.com allwebgames.com blob: gametok.com juegocasa.com playhop.com storage.yandexcloud.net wowspiele.de yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yango.com"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"/>
<title>Game</title>
<link rel="shortcut icon" href="TemplateData/favicon.ico"/>
<link rel="stylesheet" href="TemplateData/style.css"/>
<style>
	body {
	  background-color:#000000;
	}
	</style>
<script src="TemplateData/UnityProgress.js"></script>
<script src="Build/UnityLoader.js"></script>
<script src="sdk.js"></script>
<script>

	function FitScreen(){
       var w = 1280;
       var h = 720;

       var availWidth = window.innerWidth - 10;
       var availHeight = window.innerHeight - 10;

       var canvas = document.getElementById("#canvas");
       if(availWidth/availHeight>w/h){
         height = availHeight;
         width = (height*w/h);
      }else{
         width = availWidth;
         height = width*h/w;
      }

       //canvas.width = width;
       //canvas.height = height;

       document.getElementById("gameContainer").style.width=width + "px";
       document.getElementById("gameContainer").style.height=height + "px";

    }

	function SubmitLeaderboardScore(_score)
	{
		console.log("SubmitLeaderboardScore");

		if (typeof window.ysdk !== 'undefined' && window.player != null)
		{
			if (_score > window.myLeaderboardScore)
			{
				window.myLeaderboardScore = _score;

				console.log('Submit score ' + window.myLeaderboardScore);

				if (window.lb != null)
				{
					console.log('setLeaderboardScore ' + window.myLeaderboardScore);
					window.lb.setLeaderboardScore('leaderboardmain', window.myLeaderboardScore);

					//window.leaderboardReqTime = -60;
				}
				else
				{
					console.log('invalid leaderboard');
				}
			}
		}
	}

	function initPlayer()
	{
		return window.ysdk.getPlayer().then(_player => {
				// The player is logged in.
				window.player = _player;
				window.playerName = _player.getName();

				//gameInstance.SendMessage('FreezeNovaAPI', 'myPlayerName', window.playerName);

				console.log('Welcome ' + window.playerName);

				ysdk.getLeaderboards()
				  .then(_lb =>
				  {
					window.lb = _lb;
					window.hasLeaderboards = true;

					window.lb.getLeaderboardPlayerEntry('leaderboardmain')
					  .then(res =>
					  {
						window.myLeaderboardScore = res.score;
						console.log("My Score: " + res.score);

						//gameInstance.SendMessage('FreezeNovaAPI', 'myLeaderboardScore', window.myLeaderboardScore.toString());
					  })
					  .catch(err => {
						if (err.code === 'LEADERBOARD_PLAYER_NOT_PRESENT') {
						  console.log(err.code);
						}
						});

					//RequestLeaderboardData();

				  });

			});
	}

    function InitExternEval(_appId)
    {
        console.log('YandexInitExternEval ' + _appId);

		window.player = null;
		window.playerName = '';
		window.lb = null;
		window.hasLeaderboards = false;
		window.myLeaderboardScore = 0;
		//window.LeaderboardEntries = null;
		//window.LeaderboardEntriesText = '';
		//window.leaderboardReqTime = -60;

        YaGames
                .init()
                .then(ysdk_ => {
                    window.ysdk = ysdk_;
                     window.ysdk.adv.showFullscreenAdv({
                        callbacks: {
                             onClose: function() {
								gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'onClose');
							},

							onOpen: function() {
								gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'onOpen');
							},

							onError: function() {
								gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'onError');
							},

							onOffline: function() {
								gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'onOffline');
							}
							}
                    });

					initPlayer().catch(err => {
							// The player is not authorized, throws the USER_NOT_AUTHORIZED exception.

							    });

					gameInstance.SendMessage('FreezeNovaAPI', 'SetGameLanguage', window.ysdk.environment.i18n.lang);
					console.log("SetGameLanguage " + window.ysdk.environment.i18n.lang);
                })
    }

    function ExternEval()
    {
        console.log('YandexExternEval');

		gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'CallAd');


		if (typeof window.ysdk !== 'undefined')
		{
			window.ysdk.adv.showFullscreenAdv({
                    callbacks: {
                        onClose: function() {
							gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'onClose');
						},

                        onOpen: function() {
							gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'onOpen');
						},

                        onError: function() {
							gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'onError');
						},

                        onOffline: function() {
							gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'onOffline');
						}

                    }
                });
		}
    }

	function PreloadRewarded()
	{
		console.log("PreloadRewarded");

		if (window.rewardedCallbacks == undefined)
		{
			window.rewardedCallbacks = true;

			RewardedReady();
		}
	}

	function RewardedReady()
	{
		console.log("RewardedReady");

		if (window.rewardedCount == undefined)
		{
			window.rewardedCount = 1;
			window.gameInstance.SendMessage('FreezeNovaAPI', 'RewardedReady');
		}
		else{
			window.rewardedCount = window.rewardedCount + 1;
			//setTimeout(function(){ window.gameInstance.SendMessage('FreezeNovaAPI', 'RewardedReady'); }, 30000);
			window.gameInstance.SendMessage('FreezeNovaAPI', 'RewardedReady');
		}

	}

	function ShowRewarded()
    {
        console.log('ShowRewarded');

		gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'CallRewardedAd');

		if (typeof window.ysdk !== 'undefined')
		{
				ysdk.adv.showRewardedVideo({
				callbacks: {
					onOpen: () => {
						console.log('Video ad open.');

						gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'onOpen');
					},
					onRewarded: () => {
						console.log('Rewarded!');

						gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'RewardedOnRewarded');
					},
					onClose: () => {
						console.log('Video ad closed.');

						gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'onClose');
						RewardedReady();
					},
					onError: (e) => {
						console.log('Error while open video ad:', e);

						gameInstance.SendMessage('FreezeNovaAPI', 'AdMessage', 'RewardedOnError');
					}
				}
			});
		}
    }


      var gameInstance = UnityLoader.instantiate("gameContainer", "Build/game.json", {onProgress: UnityProgress});



    </script>
</head>
<body onfocus="FitScreen();" onload="FitScreen();" onresize="FitScreen();">
<div class="webgl-content">
<div id="gameContainer" style="width: auto; height: auto"></div>
</div>
</body>
</html>
